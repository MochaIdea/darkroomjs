{"version":3,"file":"build/js/darkroom.min.js","sources":["build/lib/js/darkroom.js","build/lib/js/plugins/darkroom.history.js","build/lib/js/plugins/darkroom.rotate.js","build/lib/js/plugins/darkroom.crop.js","build/lib/js/plugins/darkroom.save.js"],"names":["window","document","fabric","extend","b","a","prop","undefined","hasOwnProperty","Darkroom","element","options","plugins","this","init","Plugin","darkroom","defaults","initialize","Toolbar","actionsElement","querySelector","ButtonGroup","Button","prototype","protoProps","child","parent","constructor","apply","arguments","Surrogate","__super__","createButtonGroup","buttonGroup","createElement","className","appendChild","createButton","image","type","group","hide","disabled","button","innerHTML","disable","addEventListener","eventName","callback","active","value","classList","add","remove","Canvas","util","createClass","minWidth","minHeight","maxWidth","maxHeight","canvas","getElement","dispatchEvent","event","_this","Image","onload","initDOM","initImage","initPlugins","bind","call","src","toolbar","canvasContainer","container","parentNode","replaceChild","selection","backgroundColor","width","height","scale","scaleX","scaleY","Math","min","max","selectable","evented","lockMovementX","lockMovementY","lockRotation","lockScalingX","lockScalingY","lockUniScaling","hasControls","hasBorders","setScaleX","setScaleY","setWidth","setHeight","centerObject","setCoords","name","plugin","getPlugin","selfDestroy","snapshotImage","toDataURL","_initButtons","backHistoryStack","forwardHistoryStack","_snapshotImage","_onImageChange","goBack","length","push","currentImage","pop","_applyImage","_updateButtons","goForward","backButton","forwardButton","imgInstance","leftButton","rightButton","rotateLeft","rotateRight","rotate","angle","getAngle","abs","getWidth","getHeight","renderAll","Event","CropZone","Rect","_render","ctx","callSuper","dashWidth","flipX","flipY","fillStyle","_renderOverlay","setLineDash","mozDash","strokeStyle","_renderBorders","_renderGrid","lineDashOffset","borderOffset","x0","ceil","getLeft","x1","x2","x3","y0","getTop","y1","y2","y3","fillRect","beginPath","moveTo","lineTo","stroke","startX","startY","ratio","cropButton","okButton","cancelButton","toggleCrop","cropCurrentZone","releaseFocus","on","onMouseDown","onMouseMove","onMouseUp","onObjectMoving","onObjectScaling","hasFocus","currentObject","target","cropZone","x","y","w","h","maxX","maxY","set","minX","e","pageX","_offset","left","pageY","top","minY","lastScaleX","setLeft","lastScaleY","setTop","scaleToWidth","scaleToHeight","getScaleX","getScaleY","point","Point","activeObject","getActiveObject","containsPoint","discardActiveObject","_renderCropZone","setActiveObject","calcOffset","selectZone","forceDimension","requireFocus","bringToFront","visible","fill","originX","originY","cornerColor","cornerSize","transparentCorners","hasRotatingPoint","defaultCursor","fromX","fromY","toX","toY","isRight","isLeft","isDown","isUp","leftX","rightX","topY","bottomY","currentRatio","newWidth","newHeight","destroyButton"],"mappings":"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"}